{"name":"Social Network Analysis","tagline":"Social Network Analysis using Gephi & R","body":"### Background\r\nThis project was done as part of the Data Mining course at University Of Cincinnati. I and three other folks - Aarti Ranganathan, Swaraj Mohapatra and Ambrose Wong worked together to come up with this interesting project. \r\n\r\n### Introduction\r\nIn today's developed world everything is connected: people, information, events and places, and online social media has made it even easier. A practical way of making sense of the fuzzy connections is to analyze them as networks. With the help of Gephi, large amount of social network data is analyzed in an interactive way. The project demonstrates the hands-on analysis of real-world data sets and focuses on a range of tasks: from identifying important nodes in the network, to detecting communities, to tracing information diffusion and opinion formation. The idea is to be able to extract information from a seemingly fuzzy network and recognize communities and cliques. We further used the same techniques and applied them on other networks such as word adjacencies, books about US politics, political blogs and Facebook data. \r\nUsing these datasets, we portrayed gender distribution in a Facebook network, commonly used adjectives in a book, conflicting trends in customer demands, and political dysfunction through blogs. These exploratory analysis was combined with unsupervised learning to detect communities in a Facebook dataset. These detection algorithms used clustering type algorithms where each node was selected into a certain group. However, this was a major drawback because people could belong to multiple communities. Hence linked community analysis was also performed where people could belong to multiple clusters.  \r\n\r\nFinally, with the help of ERGM, various models are built for Facebook data and the GWESP based model with degree 1 term is chosen based on MCMC diagnostics – which reveals the error distribution. Although the model has the second best AIC and BIC values, it is still chosen as its noise distribution is normal.\r\n\r\n### Datasets\r\nWe analyzed four datasets in Gephi. The datasets differ from each other on various levels and the idea is to be able to extract information from seemingly fuzzy and different networks. The datasets include User Facebook data, word adjacencies, US political blogs and political books. In addition to Gephi, we also used R to analyze Facebook data. Note that the Facebook data was extracted using an API.\r\n\r\n### Facebook Network Analysis\r\nFacebook data from one of the users of the group was used for analysis.The attributes extracted from the facebook data include: \r\nNodes - The name of the people on the facebook user’s network\r\nId - Id is a variable that uniquely identifies the nodes on the network\r\nLabel - Label is an attribute that defines how a node is labelled on the network\r\nSex - Sex of the Facebook user’s friend\r\nAgerank - The user’s friends’s age rank. May be 13-17, 18-20 or 21+\r\nLocale - A two-letter language code and a two-letter country code representing the users’ friends’ locale\r\nDegree - The total number of edges connected to a node in the network\r\n\r\nThe network in the figure below shows that the user has quite a few communities and cliques in his Facebook network. Note that the nodes represent friends of the user and they are colored based on gender. With red nodes representing males and green nodes representing females. People who have not updated their sex on Facebook are represented as blue nodes. The links between the nodes indicate connections between the friends of the user and are called edges. In the above graph, the edges are undirected and each have the same weight. This implies that if you are my friend than I’m also your friend. \r\n![Fig 7.1](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_7_1.png?raw=true)\r\n\r\nThe figure below shows a node which acts as a significant connection between the two groups of Facebook friends. This person plays a vital role and influences the common posts that the different user groups can find in their notifications. Studying this node further can help analyze the user behavior. \r\n![FB Network with important node highlighted](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_7_2.png?raw=true)\r\n\r\nBased on the Facebook network, we can understand the distribution of the user’s friends. The people who play important roles in the network based on the number of mutual friends, friends who play the role of intermittent connections between different communities. This information affects the news feed of the user, information that will be accessible by the user and mutual friends’ suggestions.\r\n\r\n### Word Adjacencies\r\nWe explored the common adjectives and nouns in the novel \"David Copperfield\" by Charles Dickens and created an adjacency network. The attributes in the dataset include node and edge descriptions.\r\nThe node descriptions are as follows:\r\n* Nodes - The noun or adjective commonly used in the book\r\n* Id - Id is a variable that uniquely identifies the nodes on the network\r\n* Label - Label is the attribute which defines how the node is labelled on the network\r\n* Value - Indicates if the work is a noun or an adjective. 0: Adjective, 1: Noun\r\nThe edge descriptions are as follows:\r\n* Source - Indicates the node that acts as the source for the edge\r\n* Target - Indicates the node that acts as the target for the edge\r\n* Type - Specifies the type of the edge: Directed\r\n* Id - Id is a variable that uniquely identifies the edge on the network\t\r\n* Weight - The weight of an edge. In this dataset, each edge has an equal weight\r\nSince the dataset is directed, every node has an in-degree and an out-degree where in-degree is the number of words that have the current word as its predecessor and out-degree is the number of words that have the current word as its successor. The edge has a source and target indicating which node is the predecessor and which node is the successor for that connection. \r\n\r\nThe figure below indicates the distribution of the commonly used nouns and adjectives in the book. The nodes in red are adjectives and the nodes in blue are nouns. \r\n![8.1.1](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_8_1_1.png?raw=true)\r\nThe following image gives more perspective as the size of the nodes depend on the in-degree and the out-degree. The nodes that is connected to many other nodes is indicated with a size bigger than the node that is less widely used. We can study these nodes further.\r\n![Fig 8.1.2](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_8_1_2.png?raw=true)\r\nThe figure below shows that the adjectives “little” and “old” are the two commonly used adjectives that were highlighted in the previous figure. Gephi seems to be a pretty powerful tool to visualize data. \r\n![Word adjacencies](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_8_2.png?raw=true)\r\n\r\n### Books about US Politics\r\nThis dataset consists of a network of books about US politics published around the time of the 2004 presidential election and sold by the online bookseller Amazon.com. Edges between books represent frequent co-purchasing of books by the same buyers. The dataset include nodes and edges. The node attributes are as follows:\r\n* Node - The name of the book\r\n* Id - Id is a variable that uniquely identifies the nodes on the network\r\n* Label - Label is the attribute which defines how the node is labelled on the network\r\n* Value - Indicates the category of the book: liberal(l), neutral(n) or conservative(c) \r\nThe edge attributes are as follows:\r\n* Source - Indicates the node that acts as the source for the edge\r\n* Target - Indicates the node that acts as the target for the edge\r\n* Type - Specifies the type of the edge: UnDirected\r\n* Id - Id is a variable that uniquely identifies the edge on the network\t\r\n* Weight - The weight of every edge. In this dataset, every edge has an equal weight of 1\r\nThe below figure shows the division of the political books sold by Amazon in a particular period into three categories. The nodes in blue are books on conservatives, the nodes in green are books on liberals and the nodes in red are neutral. The network indicates the tendency of a buyer to buy the same kind of the book is high but there are a few inter-linking books that indicate a different trend.\r\n![Fig 9.1](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_9_1.png?raw=true)\r\nThe following figure shows the books that a user purchased along with “Surprise, Security and the Americal Experience”. We see that buyers have an equal tendency to purchase a conservative or a liberal book along with this book. \r\n![Fig 9.2](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_9_2.png?raw=true)\r\n\r\n### Political Blogs\r\nA directed network of hyperlinks between weblogs on US politics, recorded in 2005 by Adamic and Glance. The node attributes of the data are as follows:\r\nNodes - The URL of the blog\r\nId - Id is a variable that uniquely identifies the nodes on the network\r\nLabel - Label is the attribute which defines how the node is labelled on the network\r\nValue - 0: left or liberal political parties, 1: right or conservative parties \r\nSource - Specifies the source of the blog. Example: Blogarama\r\nThe edge attributes are given below:\r\nSource - Indicates the node that acts as the source for the edge\r\nTarget - Indicates the node that acts as the target for the edge\r\nType - Specifies the type of the edge: Directed\r\nId - Id is a variable that uniquely identifies the edge on the network\t\r\nWeight - The weight of every edge. In this dataset, every edge has an equal weight of 1\r\n\r\nThe Political blogs considered in the dataset are written around the 2004 presidential election.  These blogs distinguished based on political leaning. The two kinds of blogs include left or liberal and right or conservative. Analysis of Gephi network indicated the type and source of the blogs. The web crawls from one political blog to another are also considered and these are depicted by the edges in the graph.  In the below figure, the left or liberal blogs are indicated in red and the and right or conservative are shown in blue. We can see that a person is more likely to read a similar kind of a blog rather than switching between liberal and conservative. The graph also shows certain blogs which link these two groups. Such blogs will be considered for further analysis.\r\n![Fig-10.1](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_10_1.png?raw=true)\r\nIn the following figure, the size of the nodes are shown with respect to its degree. The highlighted nodes indicate that users have traversed to this blog from other political blogs more often compared to other blogs. \r\n![Fig 10.2](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_10_2.png?raw=true)\r\n\r\n### Unsupervised Learning\r\nUnsupervised learning plays a major role in the detection of communities in social networks. A common used measure is the modularity of a network which based its calculation on the total number of edges in the group and the expected number of edges in the group. However, this method is computationally very expensive because it considers all edges. Hence, there are algorithms developed that will optimally find the solution using a smaller number of sets. In Gephi, the Louvain method is used and in R, many other algorithms are used.\r\nAn inherent difficulty with this type of analysis is that nodes in social networks can belong to multiple communities, but this type of clustering only allows each node to belong to one community. Using another package in R: Linkcomm, we can place different nodes into multiple communities. \r\nThe code and the analysis is shown below: \r\n```\r\nlibrary(subgraphMining)\r\nlibrary(igraph0)\r\nlibrary(linkcomm)\r\nAmbrose <- read.graph(\"C:/Users/Ambrose/Desktop/Courses/Bana 7047/Project/data/Facebook.gml\",format=c(\"gml\"))\r\nAmbrose.el <- get.edgelist(Ambrose)\r\nAmbrose.lc <- getLinkCommunities(Ambrose.el,directed = FALSE,  hcmethod = \"single\")\r\nfgreedy<-fastgreedy.community(Ambrose,merges=TRUE, modularity=TRUE)\r\ndendPlot(fgreedy)\r\nplot(Ambrose, vertex.color=membership(fgreedy),vertex.size=2, vertex.label.font=0.2, vertex.label.color=membership(fgreedy))\r\n```\r\n![Link Communities](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_11_2_1.png?raw=true)\r\n![Fig-11.2.2](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_11_2_2.png?raw=true)\r\n\r\n### Random Graph Models\r\nThe statnet package in R has been used to do build ERGM models from the Facebook dataset. The models have been created under several parameter constraints leading to different models. \r\n```\r\ninstall.packages(\"statnet\")\r\ninstall.packages(\"igraph\")\r\ninstall.packages(\"intergraph\")\r\nlibrary(statnet)\r\nlibrary(igraph)\r\nlibrary(intergraph)\r\n\r\n#Reading the graph\r\nfbAarti <- read.graph(file = \"Aart_FB.gml\", format = \"gml\")\r\n\r\n#Converting the file to a network file\r\nfb <- asNetwork(fbAarti)\r\nplot(fb)\r\nsummary(fb)\r\n\r\n#Mixing Matrices based on attribute names\r\nmixingmatrix(fb, \"locale\")\r\nmixingmatrix(fb, \"agerank\")\r\nmixingmatrix(fb, \"label\")\r\nmixingmatrix(fb, \"sex\")\r\n\r\n#Network components\r\ntable(component.dist(fb)$csize)\r\nnetwork.size(fb)\r\n\r\n#Erdos-Renyi model\r\nfb.model.er <- ergm(fb~edges)\r\nsummary(fb.model.er)\r\nfb.model.er$mle.lik\r\n\r\n#Assortative mixing edge model\r\nfb.model.assor.2 <- ergm(fb~edges + nodematch(\"locale\") + nodematch(\"sex\"))\r\nsummary(fb.model.assor.2)\r\nfb.model.assor.2$mle.lik\r\n\r\n#Simulate the network\r\nsim.assor <- simulate(fb.model.assor.2, burnin = 1e+6, verbose = TRUE, seed = 9)\r\nmixingmatrix(sim.assor, \"locale\")\r\nmixingmatrix(sim.assor, \"sex\")\r\n\r\n#Network components\r\ntable(component.dist(fb)$csize)\r\nnetwork.size(fb)\r\n\r\n#Degree distribution\r\nsummary(fb ~ degree(0:120))\r\nsummary(sim.assor ~ degree(0:120))\r\n\r\n\r\nc(fb = summary(fb ~ triangle), sim.assor = summary(sim.assor ~ triangle))\r\n\r\nfb.model.ed.tr <- ergm(fb ~ edges + triangle, maxit = 4, control.ergm =  control.ergm(seed = 9), verbose = TRUE)\r\n\r\nsummary(fb.model.ed.tr)\r\nfb.model.ed.tr$mle.lik\r\n\r\n# GWESP model with assortative fields\r\nfb.gwesp <- ergm(fb ~ edges + nodematch(\"sex\") + nodematch(\"locale\") + gwesp(0.25, fixed = TRUE), \r\n               MCMCsamplesize = 10000, maxit = 4, verbose = TRUE, \r\n               control = control.ergm(steplength = 0.25), seed = 9, parallel = 4)\r\n\r\nfb.model.ed.tr.1 <- ergm(fb ~ edges + triangle + nodematch(\"sex\") + nodematch(\"locale\") + degree(1),\r\n                       maxit = 4, MCMCsamplesize = 20000, control.ergm =  control.ergm(seed = 9, MCMC.interval=500), \r\n                       calc.mcmc.se = FALSE, parallel = 4, verbose = TRUE)\r\n\r\n\r\n\r\n```\r\n![Table](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Table%20Model%20Comparison.PNG?raw=true)\r\n\r\nA comparison of these models have been done to decide the best model. The edge and triangle based model has the highest likelihood and lowest AIC and BIC values. The GWESP based model with degree 1 term has the next best values. \r\n\r\n```\r\nmcmc.diagnostics(fb.model.ed.tr.1)\r\n```\r\n![Fig 12.1.1](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_12_1_1.png?raw=true)\r\n![Fig 12.1.2](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_12_1_2.png?raw=true)\r\n\r\nThe MCMC diagnostics of the model which show how the error for each of the terms are modeled show that the GWESP based model with degree 1 term has the terms normally distributed while the edge and triangle based model does not. This mean that the GWESP model captures the network better and hence it is chosen.\r\n\r\n```\r\ngof.fb.model.ed.tr <- gof(fb.model.ed.tr)\r\nplot(gof.fb.model.ed.tr)\r\ngof.deg.fb.model.ed.tr <- gof(fb.model.ed.tr~degree)\r\nplot(gof.deg.fb.model.ed.tr)\r\n```\r\n![Fig 12.2.1](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_12_2_1.png?raw=true)\r\n![Fig 12.2.2](https://github.com/Inquisitive-Geek/Social-Network-Analysis/blob/master/Fig_12_2_2.png?raw=true)\r\n\r\nThe goodness-of-fit diagnostics of the model shows how the observed and distribution of simulated networks compare with each other. The figures below contain the observed network’s statistics plotted in bold while the simulated networks box-plot distribution is plotted in gray. The observed network is contained in the simulated distribution of networks for the most part.","google":"UA-67244594-1","note":"Don't delete this file! It's used internally to help with page regeneration."}